# CONTEXTO DO PROJETO POKEDEX-BFF
# Última atualização: 2025-09-21

## Estrutura e Fluxo de Dados
- O BFF não executa mais carga de dados automática (nem via seeder, nem via JPA).
- O banco de dados é inicializado e populado via scripts SQL: `docker/db/schema.sql` (estrutura) e `docker/db/init-data.sql` (dados).
- Os dados são gerados a partir dos arquivos JSON em `src/main/resources/data`, que devem ser nomeados com prefixos numéricos para garantir a ordem de importação (ex: `01_region.json`, `10_pokemon.json`).
- O script `scripts/json2sql.py` converte os JSONs em comandos SQL, removendo o prefixo numérico para gerar o nome correto da tabela.
- O comando `make db-bootstrap` executa todo o fluxo: gera o SQL dos dados, faz o build do JAR do BFF e sobe o ambiente completo com Docker Compose.
- O Dockerfile do BFF está na raiz do projeto e espera o JAR em `build/libs/`.

## Comandos principais
- `make generate-sql-data`: Gera o SQL de dados a partir dos JSONs.
- `make db-bootstrap`: Gera o SQL, faz build do JAR e sobe o ambiente completo (DB + BFF).

## Observações importantes
- O nome da tabela no SQL é extraído do nome do arquivo JSON removendo o prefixo numérico e o underline.
- O script Python exibe logs de sucesso/erro para cada arquivo processado.
- O README.md e o Makefile estão atualizados com o novo fluxo.
- O banco de dados é populado automaticamente ao subir o ambiente, sem dependência do BFF.
- O fluxo é robusto para CI/CD, onboarding e ambientes limpos.

## Últimos ajustes realizados
- Script Python ajustado para remover prefixo numérico do nome da tabela.
- Makefile ajustado para garantir build do JAR antes do build Docker.
- Dockerfile criado/ajustado na raiz do projeto.
- README.md atualizado com instruções e observações sobre ordem e integridade dos dados.

# Sempre atualize este arquivo ao realizar mudanças estruturais, de build ou de fluxo de dados.


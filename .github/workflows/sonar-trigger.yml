name: "Sonar Scheduler"

on:
  workflow_dispatch:
    inputs:
      branch:
        description: 'Branch to analyze'
        required: false
        default: 'main'
        type: string
  schedule:
    - cron: '0 2 * * 1' # Segunda-feira Ã s 2h UTC
  pull_request:
    types: [opened]
    branches: [main]
    paths:
      - 'src/**'
      - 'build.gradle.kts'
      - 'settings.gradle.kts'

jobs:
  run-shared-sonar:
    uses: ./.github/workflows/shared-ci.yml
    with:
      run-sonar: true
      run-deployment: false
      environment: 'development'
    secrets:
      SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
